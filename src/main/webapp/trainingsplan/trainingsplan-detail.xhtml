<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <f:metadata>
        <f:viewParam name="trainingsplanId" value="#{trainingsplanDetails.trainingsplanId}"/>
        <f:viewAction action="#{trainingsplanDetails.onLoad}"/>
    </f:metadata>
    <ui:param name="pageTitle" value="Trainingsplan Details"/>
    <ui:composition template="../templates/detail-template.xhtml">
        <ui:param name="masteroutcome" value="trainingsplan-list.xhtml"/>
        <ui:define name="detail-name">
            #{trainingsplanDetails.trainingsplan.name}
        </ui:define>
        <ui:define name="detail-content">
            <div style="display: grid; grid-gap: 20px">
                <div>
                    <h5>Name</h5>
                    <p:inputText placeholder="Name" value="#{trainingsplanDetails.trainingsplan.name}" />
                </div>
                <div>
                    <h5>Startdatum</h5>
                    <div class="p-field p-col-12 p-md-4">
                        <p:datePicker id="start" value="#{trainingsplanDetails.trainingsplan.startDatum}">
                            <f:ajax render="end" />
                        </p:datePicker>
                    </div>
                </div>

                <div>
                    <h5>Enddatum</h5>
                    <div class="p-field p-col-12 p-md-4">
                        <p:datePicker id="end"
                                      value="#{trainingsplanDetails.trainingsplan.endDatum}"
                                      disabled="#{trainingsplanDetails.trainingsplan.startDatum == null}" />
                    </div>
                </div>

                <div>
                    <p:outputLabel value="Ãœbung"/>
                    <p:autoComplete id="dd" dropdown="true"
                                    value="#{trainingsplanDetails.trainingsplanItem.uebung}"
                                    converter="#{uebungConverter}"
                                    completeMethod="#{trainingsplanDetails.completeText}" scrollHeight="250"/>

                    <p:inputText value="#{trainingsplanDetails.trainingsplanItem.gewicht}" placeholder="Gewicht"/>
                    <p:inputText value="#{trainingsplanDetails.trainingsplanItem.anzahlSets}" placeholder="Sets"/>
                    <p:inputText value="#{trainingsplanDetails.trainingsplanItem.anzahlReps}" placeholder="Reps"/>

                    <p:commandButton value="Speichern" action="#{trainingsplanDetails.saveItem}" update="list" />
                </div>

                <div>
                    <h5>Ãœbungen</h5>
                    <p:dataList id="list"
                                value="#{trainingsplanDetails.trainingsplan.trainingsplanItemList}"
                                var="trainingsplanItem"
                                type="ordered">
                        <ui:decorate template="../templates/trainingsplan/trainingsplan-item-list-item.xhtml">
                            <ui:param name="trainingsplanItem" value="#{trainingsplanItem}"/>
                            <ui:param name="bean" value="#{trainingsplanDetails}"/>
                            <ui:param name="delete" value="deleteItem"/>
                            <ui:param name="arg" value="#{trainingsplanItem.uebung.name}"/>
                            <ui:param name="updateview" value="list" />
                        </ui:decorate>
                    </p:dataList>
                </div>
            </div>

        </ui:define>

        <ui:define name="save_btn">
            <p:commandButton value="Speichern" action="#{trainingsplanDetails.save}"/>
        </ui:define>
    </ui:composition>
</html>